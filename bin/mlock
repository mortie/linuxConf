#!/bin/bash

###################################
## This script locks the screen. ##
###################################

touch ~/.mlocked

if pkill -0 compton; then
	compton=1
else
	compton=0
fi

onexit() {
	rm -f ~/.mlocked "$SRC" "$DST"
	pkill i3lock
	pkill swaylock
	pkill -USR2 dunst
	if [ "$compton" = 1 ] && ! pkill -0 compton; then
		nohup comp &
	fi
}
trap onexit EXIT

pkill -USR1 dunst
#i3lock-fancy-rapid 7 5 -e -n \
#	--clock \
#	--indicator \
#	--timecolor=ffffffff \
#	--datecolor=ffffffff \
#	--ringcolor=000000ff \
#	--linecolor=00000000 \
#	--separatorcolor=000000ff \
#	--insidecolor=00000099
swaylock -e -S \
	--clock \
	--indicator \
	--indicator-radius 100 \
	--indicator-thickness 7 \
	--effect-scale 0.5 \
	--effect-blur 7x5 \
	--effect-scale 2 \
	--ring-color bb00cc \
	--key-hl-color 880033 \
	--line-color 00000000 \
	--inside-color 00000088 \
	--separator-color 00000000

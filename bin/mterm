#!/bin/bash

####################################################
## This script starts a terminal, optionally with ##
## a window name and executing a command.         ##
####################################################

function isterm()
{
	which "$1" &> /dev/null
}

P_CMD=""
P_NAME=""
P_EXEC=""

if isterm termite; then
	P_CMD="termite"
	if [ "$1" != "" ]; then
		P_EXEC="-e 'sh -c \"$1\"'"
	fi
	if [ "$2" != "" ]; then
		P_NAME="--name '$2'"
	fi
elif isterm urxvt; then
	P_CMD="urxvt"
	if [ "$1" != "" ]; then
		P_EXEC="-e sh -c '$1'"
	fi
	if [ "$2" != "" ]; then
		P_NAME="-name '$2'"
	fi
else
	echo "No suitable terminal found."
	exit 1
fi

C="$P_CMD $P_NAME $P_EXEC"
eval "$C"
exit $?
